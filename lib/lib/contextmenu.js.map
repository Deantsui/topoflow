{"version":3,"sources":["../../src/lib/contextmenu.js"],"names":["Contextmenu","config","currentNodeID","initContextmenu","rightMenuEln","document","createElement","classList","initEvent","container","appendChild","addEventListener","e","hide","onClick","jsons","target","dataset","info","currentNodeInfo","JSON","parse","style","nodeInfo","position","genContextMenuItem","x","y","render","items","menuHTML","map","stringify","v","label","innerHTML","join"],"mappings":";;;;;;;;;;IAAqBA,W;AACjB,yBAAYC,MAAZ,EAAoB;AAAA;;AAChB,aAAKA,MAAL,GAAcA,MAAd;AACA,aAAKC,aAAL,GAAqB,EAArB;AACA,aAAKC,eAAL;AACH;AACD;;;;;0CACkB;AACd,gBAAIC,eAAeC,SAASC,aAAT,CAAuB,KAAvB,CAAnB;AACAF,yBAAaG,SAAb,GAAyB,YAAzB;;AAEA,iBAAKH,YAAL,GAAoBA,YAApB;AACA,iBAAKI,SAAL;;AAEA,iBAAKP,MAAL,CAAYQ,SAAZ,CAAsBC,WAAtB,CAAkCN,YAAlC;AACH;;;oCAEW;AAAA;;AACR,iBAAKA,YAAL,CAAkBO,gBAAlB,CAAmC,YAAnC,EAAiD,UAACC,CAAD,EAAO;AACpD,sBAAKC,IAAL;AACH,aAFD;;AAIA,iBAAKT,YAAL,CAAkBO,gBAAlB,CAAmC,OAAnC,EAA4C,UAACC,CAAD,EAAO;AAC/C,oBAAI,CAAC,CAAC,MAAKX,MAAL,CAAYa,OAAlB,EAA2B;AACvB,wBAAIC,QAAQH,EAAEI,MAAF,CAASC,OAAT,CAAiBC,IAA7B;AACA,0BAAKjB,MAAL,CAAYa,OAAZ,CAAoB,MAAKK,eAAzB,EAA0CC,KAAKC,KAAL,CAAWN,KAAX,CAA1C;AACA,0BAAKF,IAAL;AACH;AACJ,aAND;AAOH;;AAED;;;;+BACO;AACH,iBAAKT,YAAL,CAAkBkB,KAAlB,GAA0B,eAA1B;AACH;;AAED;;;;6BACKC,Q,EAAUC,Q,EAAU;AACrB,iBAAKL,eAAL,GAAuBI,QAAvB;AACA,iBAAKE,kBAAL;AACA,iBAAKrB,YAAL,CAAkBkB,KAAlB,8CAAmEE,SAASE,CAA5E,WAAmFF,SAASG,CAA5F;AACH;;;6CAEoB;AACjB,gBAAI,CAAC,CAAC,KAAK1B,MAAL,CAAY2B,MAAlB,EAA0B;AACtB,oBAAIC,QAAQ,KAAK5B,MAAL,CAAY2B,MAAZ,CAAmB,KAAKT,eAAxB,CAAZ;;AAEA,oBAAI,CAAC,CAAC,CAAEU,KAAJ,IAAYA,UAAU,IAA1B,EAAgC;AAC5B;AACH;AACD,oBAAIC,WAAWD,MAAME,GAAN,CAAU,aAAK;AAC1B,8CAAwBX,KAAKY,SAAL,CAAeC,CAAf,CAAxB,SAA6CA,EAAEC,KAA/C;AACH,iBAFc,CAAf;AAGA,qBAAK9B,YAAL,CAAkB+B,SAAlB,YAAqCL,SAASM,IAAT,CAAc,GAAd,CAArC;AACH,aAVD,MAUO;AACH,uBAAO,IAAP;AACH;AACJ;;;;;;kBAzDgBpC,W","file":"contextmenu.js","sourcesContent":["export default class Contextmenu {\n    constructor(config) {\n        this.config = config;\n        this.currentNodeID = '';\n        this.initContextmenu();\n    }\n    // 初始化右键菜单操作\n    initContextmenu() {\n        let rightMenuEln = document.createElement(\"div\");\n        rightMenuEln.classList = 'right-menu';\n\n        this.rightMenuEln = rightMenuEln;\n        this.initEvent();\n\n        this.config.container.appendChild(rightMenuEln);\n    }\n\n    initEvent() {\n        this.rightMenuEln.addEventListener('mouseleave', (e) => {\n            this.hide();\n        });\n\n        this.rightMenuEln.addEventListener('click', (e) => {\n            if (!!this.config.onClick) {\n                let jsons = e.target.dataset.info;\n                this.config.onClick(this.currentNodeInfo, JSON.parse(jsons));\n                this.hide();\n            }\n        });\n    }\n\n    // 隐藏右键菜单\n    hide() {\n        this.rightMenuEln.style = 'display:none;';\n    }\n\n    // 在指定的位置显示菜单\n    show(nodeInfo, position) {        \n        this.currentNodeInfo = nodeInfo;\n        this.genContextMenuItem();\n        this.rightMenuEln.style = `display: inline; transform: translate(${position.x}px,${position.y}px);`;\n    }\n\n    genContextMenuItem() {\n        if (!!this.config.render) {\n            let items = this.config.render(this.currentNodeInfo);\n            \n            if (!!! items ||items === null) {\n                return;\n            }\n            let menuHTML = items.map(v => {\n                return `<li data-info=${JSON.stringify(v)}>${v.label}</li>`\n            });\n            this.rightMenuEln.innerHTML = `<ul>${menuHTML.join(' ')}</ul>`;\n        } else {\n            return null;\n        }\n    }\n}"]}