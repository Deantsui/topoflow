{"version":3,"sources":["../../src/lib/math.js"],"names":["getPoint","j","d","c","e","x","width","y","height","l","isNaN","k","h","f","g","i","Math","abs","position","calculateLinkPoint","sourceNode","targetNode","config","offset","startNodeInfo","endNodeInfo","startPoint","endPoint"],"mappings":"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","file":"math.js","sourcesContent":["export default {\n    // 获取节点间的位置信息\n    getPoint(j, d) {\n        let c = d,\n            e = {\n                x: j.x + j.width / 2,\n                y: j.y + j.height / 2\n            };\n        let l = (e.y - c.y) / (e.x - c.x);\n        l = isNaN(l) ?\n            0 :\n            l;\n        let k = j.height / j.width;\n        let h = c.y < e.y ?\n            -1 :\n            1,\n            f = c.x < e.x ?\n                -1 :\n                1,\n            g,\n            i;\n        if (Math.abs(l) > k && h === -1) {\n            g = e.y - j.height / 2;\n            i = e.x + h * j.height / 2 / l;\n        } else {\n            if (Math.abs(l) > k && h === 1) {\n                g = e.y + j.height / 2;\n                i = e.x + h * j.height / 2 / l;\n            } else {\n                if (Math.abs(l) < k && f === -1) {\n                    g = e.y + f * j.width / 2 * l;\n                    i = e.x - j.width / 2;\n                } else {\n                    if (Math.abs(l) < k && f === 1) {\n                        g = e.y + j.width / 2 * l;\n                        i = e.x + j.width / 2;\n                    }\n                }\n            }\n        }\n        let position = {\n            x: i,\n            y: g\n        };\n        return position;\n    },\n\n    // 计算两个节点之间线条的坐标信息\n    calculateLinkPoint(sourceNode, targetNode, config) {\n        let offset = 10;\n        if (!sourceNode || !targetNode) {\n            return;\n        }\n        let startNodeInfo = {\n            x: sourceNode.x - offset / 2,\n            y: sourceNode.y - offset / 2,\n            width: sourceNode.width + offset,\n            height: sourceNode.height + offset\n        };\n\n        let endNodeInfo = {\n            x: targetNode.x - offset / 2,\n            y: targetNode.y - offset / 2,\n            width: targetNode.width + offset,\n            height: targetNode.height + offset\n        };\n\n        let startPoint = this.getPoint(startNodeInfo, {\n            x: endNodeInfo.x + endNodeInfo.width / 2,\n            y: endNodeInfo.y + endNodeInfo.height / 2\n        });\n        let endPoint = this.getPoint(endNodeInfo, startPoint);\n        return [startPoint.x, startPoint.y, endPoint.x, endPoint.y];\n    }\n}"]}